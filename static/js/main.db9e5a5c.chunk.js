(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(4),c=a.n(r),i=(a(12),a(13),a(14),a(15),a(5));const o={A1:{width:594,height:841},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},Letter:{width:215.9,height:279.4},Legal:{width:215.9,height:355.6},Tabloid:{width:279.4,height:431.8}},s=e=>new Promise((t,a)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=function(){const e=document.createElement("canvas");e.width=n.width,e.height=n.height;const a=e.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.globalCompositeOperation="source-over",a.drawImage(n,0,0);const l=e.toDataURL("image/jpeg",1);t(l)},n.onerror=a,n.src=e});var m=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(50),[c,m]=Object(n.useState)("percentage"),[p,u]=Object(n.useState)(2),[d,h]=Object(n.useState)("A4"),[g,v]=Object(n.useState)("portrait"),[E,f]=Object(n.useState)(""),[b,w]=Object(n.useState)(""),[N,y]=Object(n.useState)(0),[C,x]=Object(n.useState)(null),[S,k]=Object(n.useState)(null),[O,F]=Object(n.useState)(!1),[P,j]=Object(n.useState)(0),[A,I]=Object(n.useState)(!1),L=Object(n.useRef)(null),z=()=>{x(null)},R=e=>{t(t=>t.filter((t,a)=>a!==e))},W=()=>{let t,n;if("Custom"===d)t=parseFloat(E),n=parseFloat(b);else{const e=o[d];t=e.width,n=e.height}"landscape"===g&&([t,n]=[n,t]);const l=parseFloat(N)||0,r=e.map((e,n)=>{const r=e.overrideScale?parseFloat(e.overrideScale):null;if(null===r||isNaN(r)){if("percentage"===c)return{index:n,width:e.width*(a/100),height:e.height*(a/100),src:e.src};{const a=(t-(p-1)*l)/p,r=a/e.width;return{index:n,width:a,height:e.height*r,src:e.src}}}return{index:n,width:e.width*(r/100),height:e.height*(r/100),src:e.src}}),i=r.find(e=>e.width>t||e.height>n);if(i)return alert("Image "+(i.index+1)+" is too big for the page. Please reduce scale."),[];r.sort((e,t)=>t.width*t.height-e.width*e.height);const s=[];let m=[...r];for(;m.length>0;){const e=[],a=[],r=[];for(let c of m){let i=!1,o=-1,s=1/0;for(let e=0;e<a.length;e++){const t=a[e];t.currentY+c.height<=n&&t.currentY<s&&(s=t.currentY,o=e)}if(-1!==o){const t=a[o];e.push({index:c.index,x:t.x,y:t.currentY,width:c.width,height:c.height,src:c.src}),a[o].currentY+=c.height+l,a[o].maxWidth=Math.max(a[o].maxWidth,c.width),i=!0}else{let n=0;if(a.length>0){const e=a[a.length-1];n=e.x+e.maxWidth+l}n+c.width<=t&&(a.push({x:n,currentY:c.height+l,maxWidth:c.width}),e.push({index:c.index,x:n,y:0,width:c.width,height:c.height,src:c.src}),i=!0)}i||r.push(c)}if(s.push(e),r.length===m.length)break;m=r}return s};let D={},Y=1;if(d){let e,t;if("Custom"===d)e=parseFloat(E)||210,t=parseFloat(b)||297;else{const a=o[d];e=a.width,t=a.height}"landscape"===g&&([e,t]=[t,e]);const a="landscape"===g?500:300;Y=a/e,D={width:a,height:a*(t/e),position:"relative",backgroundColor:"#fff"}}return l.a.createElement("div",{className:"home-container"},A&&l.a.createElement("div",{className:"loading-overlay"},l.a.createElement("div",{className:"loading-spinner"},"Creating PDF...")),l.a.createElement("header",{className:"header-container"},l.a.createElement("h1",{className:"header-title"},"PixPact"),l.a.createElement("div",{className:"header-links"},l.a.createElement("a",{href:"https://sayantan.is-a.dev",target:"_blank",rel:"noopener noreferrer"},"Developer"),l.a.createElement("a",{href:"https://github.com/legendsayantan/pixpact",target:"_blank",rel:"noopener noreferrer"},"Source Code"))),l.a.createElement("div",{className:"main-container"},l.a.createElement("div",{className:"controls"},l.a.createElement("div",{className:"file-input-container"},l.a.createElement("label",{htmlFor:"fileInput",className:"file-label"},"Select Images"),l.a.createElement("input",{id:"fileInput",type:"file",accept:"image/*",multiple:!0,className:"file-input",onChange:e=>{Array.from(e.target.files).forEach(e=>{const a=URL.createObjectURL(e),n=new Image;n.onload=(()=>{t(t=>[...t,{file:e,src:a,width:n.width,height:n.height,overrideScale:""}])}),n.src=a})},ref:L})),l.a.createElement("div",{className:"page-customization"},l.a.createElement("h3",null,"Page Customization"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Page Format:"),l.a.createElement("select",{value:d,onChange:e=>h(e.target.value),className:"styled-select"},l.a.createElement("option",{value:"A4"},"A4"),l.a.createElement("option",{value:"Letter"},"Letter"),l.a.createElement("option",{value:"Legal"},"Legal"),l.a.createElement("option",{value:"A1"},"A1"),l.a.createElement("option",{value:"A3"},"A3"),l.a.createElement("option",{value:"A5"},"A5"),l.a.createElement("option",{value:"Tabloid"},"Tabloid"),l.a.createElement("option",{value:"Custom"},"Custom"))),"Custom"===d&&l.a.createElement("div",{className:"form-group custom-dimensions"},l.a.createElement("input",{type:"number",placeholder:"Width (mm)",value:E,onChange:e=>f(e.target.value),className:"styled-input"}),l.a.createElement("input",{type:"number",placeholder:"Height (mm)",value:b,onChange:e=>w(e.target.value),className:"styled-input"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Orientation:"),l.a.createElement("div",{className:"orientation-options"},l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"portrait",checked:"portrait"===g,onChange:e=>v(e.target.value)}),l.a.createElement("span",null,"Portrait")),l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"landscape",checked:"landscape"===g,onChange:e=>v(e.target.value)}),l.a.createElement("span",null,"Landscape"))))),l.a.createElement("div",{className:"scale-customization"},l.a.createElement("h3",null,"Scale Customization"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"percentage",checked:"percentage"===c,onChange:e=>m(e.target.value)}),l.a.createElement("span",null,"Resolution Scale")),l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"columns",checked:"columns"===c,onChange:e=>m(e.target.value)}),l.a.createElement("span",null,"Columns per Page"))),l.a.createElement("div",{className:"form-group"},"percentage"===c?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"number",step:"1",value:a,onChange:e=>r(parseFloat(e.target.value)),className:"styled-input"})):l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"number",min:"1",value:p,onChange:e=>u(parseInt(e.target.value,10)),className:"styled-input"})))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Margin (px):"),l.a.createElement("input",{type:"number",value:N,onChange:e=>y(e.target.value),className:"styled-input"})),l.a.createElement("div",{className:"control-btns"},l.a.createElement("button",{onClick:()=>{const e=W();e.length>0&&(k(e),j(0),F(!0),console.log("Calculated layout:",e))},className:"control-btn calc-btn"},"Preview"),l.a.createElement("button",{onClick:async()=>{let t,a;if(I(!0),"Custom"===d)t=parseFloat(E),a=parseFloat(b);else{const e=o[d];t=e.width,a=e.height}"landscape"===g&&([t,a]=[a,t]);const n=W();if(0===n.length)return void I(!1);const l=new i.a({orientation:g,unit:"mm",format:[t,a]});for(let r=0;r<n.length;r++){r>0&&l.addPage([t,a],g);for(let t of n[r]){const a=await s(e[t.index].src);l.addImage(a,"JPEG",t.x,t.y,t.width,t.height)}}l.save("pixpact_output_"+e.length+"_images.pdf"),I(!1)},className:"control-btn generate-btn"},"Save as PDF"))),0===e.length?l.a.createElement("div",{className:"empty-preview"},l.a.createElement("h2",null,"Add some images to effortlessly compact them into pages"),l.a.createElement("p",null,"provide mismatching images, of any size or resolution")):l.a.createElement("div",{className:"previews"},e.map((e,t)=>l.a.createElement("div",{key:t,className:"preview-container",onClick:()=>(e=>{x(e)})(t)},l.a.createElement("div",{className:"preview-number"},t+1),l.a.createElement("img",{src:e.src,alt:`Preview ${t}`,className:"preview-image"}),l.a.createElement("div",{className:"overlay"},l.a.createElement("span",null,e.width," x ",e.height),l.a.createElement("span",null,"Scale: ",e.overrideScale||"Default",e.overrideScale?"%":"")),l.a.createElement("button",{className:"remove-btn",onClick:e=>{e.stopPropagation(),R(t)}},"\xd7"))))),null!==C&&l.a.createElement("div",{className:"popup-overlay",onClick:z},l.a.createElement("div",{className:"popup",onClick:e=>e.stopPropagation()},l.a.createElement("div",{className:"popup-content"},l.a.createElement("div",{className:"popup-image-container"},l.a.createElement("img",{src:e[C].src,alt:"Large Preview"})),l.a.createElement("div",{className:"popup-controls"},l.a.createElement("h2",null,"Customise"),l.a.createElement("p",null,"Image dimensions: ",e[C].width," x ",e[C].height),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Override Scale (%):"),l.a.createElement("input",{type:"number",step:"1",value:e[C].overrideScale,onChange:e=>((e,a)=>{t(t=>t.map((t,n)=>n===e?{...t,overrideScale:a}:t))})(C,e.target.value),className:"popup-input styled-input"})),l.a.createElement("div",{className:"popup-btn-group"},l.a.createElement("button",{onClick:()=>{R(C),z()},className:"popup-btn"},"Remove Image"),l.a.createElement("button",{onClick:z,className:"popup-btn"},"Close")))))),O&&S&&l.a.createElement("div",{className:"popup-overlay",onClick:()=>F(!1)},l.a.createElement("div",{className:"popup calc-popup-vertical",onClick:e=>e.stopPropagation()},l.a.createElement("h2",{className:"calc-heading"},"Layout Preview"),l.a.createElement("div",{className:"calc-tabs"},S.map((e,t)=>l.a.createElement("button",{key:t,className:`calc-tab ${P===t?"active":""}`,onClick:()=>j(t)},t+1))),l.a.createElement("div",{className:"calc-preview-container-vertical"},(()=>{let t,a;if("Custom"===d)t=parseFloat(E)||210,a=parseFloat(b)||297;else{const e=o[d];t=e.width,a=e.height}"landscape"===g&&([t,a]=[a,t]);const n="landscape"===g?500:300,r=n*(a/t),c=n/t;return l.a.createElement("div",{className:"calc-preview-page",style:{width:n,height:r}},S[P].map(t=>l.a.createElement("div",{key:t.index,style:{position:"absolute",left:t.x*c,top:t.y*c,width:t.width*c,height:t.height*c,border:"2px dashed #FFD700",boxSizing:"border-box"}},l.a.createElement("img",{src:e[t.index].src,alt:`Image ${t.index+1}`,style:{width:"100%",height:"100%",display:"block"}}),l.a.createElement("div",{style:{position:"absolute",top:0,left:0,background:"#ff5722",color:"#fff",padding:"2px 4px",fontSize:"10px"}},t.index+1))))})()),l.a.createElement("button",{onClick:()=>F(!1),className:"popup-btn"},"Close"))))};var p=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(m,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[7,1,3]]]);
//# sourceMappingURL=main.db9e5a5c.chunk.js.map