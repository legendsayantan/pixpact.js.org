(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/icon.dcc36dca.svg"},,function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(4),i=a.n(r),o=(a(13),a(14),a(15),a(5)),c=a(6),s=a.n(c);const m={A1:{width:594,height:841},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},Letter:{width:215.9,height:279.4},Legal:{width:215.9,height:355.6},Tabloid:{width:279.4,height:431.8}},d=e=>new Promise((t,a)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=function(){const e=document.createElement("canvas");e.width=n.width,e.height=n.height;const a=e.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.globalCompositeOperation="source-over",a.drawImage(n,0,0);const l=e.toDataURL("image/jpeg",1);t(l)},n.onerror=a,n.src=e});var u=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(50),[i,c]=Object(n.useState)("columns"),[u,h]=Object(n.useState)(2),[p,g]=Object(n.useState)("A4"),[v,E]=Object(n.useState)("portrait"),[f,w]=Object(n.useState)(""),[b,y]=Object(n.useState)(""),[N,x]=Object(n.useState)(0),[C,S]=Object(n.useState)(0),[k,A]=Object(n.useState)("pages"),[O,P]=Object(n.useState)(null),[j,F]=Object(n.useState)(null),[I,z]=Object(n.useState)(!1),[L,R]=Object(n.useState)(0),[W,M]=Object(n.useState)(!1),D=Object(n.useRef)(null),U=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.getElementById("imageNoModified");e&&t.value!==t.defaultValue&&T(O,parseInt(t.value,10)-1),P(null)},T=(e,a)=>{t(t=>{const n=[...t],[l]=n.splice(e,1);return n.splice(a,0,l),n})},B=e=>{t(t=>t.filter((t,a)=>a!==e))},$=()=>{let t,n;if("Custom"===p)t=parseFloat(f),n=parseFloat(b);else{const e=m[p];t=e.width,n=e.height}"landscape"===v&&([t,n]=[n,t]);const l=parseFloat(C)||0,r=parseFloat(N)||0,o=t-2*r,c=n-2*r,s=e.map((e,t)=>{const n=e.overrideScale?parseFloat(e.overrideScale):null;if(null===n||isNaN(n)){if("percentage"===i)return{index:t,width:e.width*(a/100),height:e.height*(a/100),src:e.src};{const a=o-(u-1)*l;let n=Math.floor(a/u),r=n/e.width;return e.height*r>c&&(r=c/e.height,n=Math.floor(e.width*r)),{index:t,width:n,height:Math.floor(e.height*r),src:e.src}}}return{index:t,width:e.width*(n/100),height:e.height*(n/100),src:e.src}}),d=s.find(e=>e.width>o||e.height>c);if(d)return alert("Image "+(d.index+1)+" is too big for the page. Please reduce scale."),[];"pages"===k&&s.sort((e,t)=>t.width*t.height-e.width*e.height);let h=[{x:r,width:o,y:r}];const g=e=>{let t=1/0,a=0,n=-1;for(let l=0;l<h.length;l++){const r=h[l];r.width>=e.width&&(r.y<t||r.y===t&&r.x<a)&&(t=r.y,a=r.x,n=l)}return-1===n||t+e.height>r+c?null:{x:a,y:t,nodeIndex:n}},E=(e,t)=>{const a={x:e.x,width:t.width,y:e.y+t.height+l};let n=[];for(let i of h)if(i.x+i.width<=e.x)n.push(i);else if(i.x>=e.x+t.width)i.x===e.x+t.width?n.push({x:i.x+l,width:i.width,y:i.y}):n.push(i);else{i.x<e.x&&n.push({x:i.x,width:e.x-i.x,y:i.y});let a=i.x+i.width,r=e.x+t.width+l;a>r&&n.push({x:r,width:a-r,y:i.y})}n.push(a),n.sort((e,t)=>e.x-t.x);let r=[];for(let l of n){if(r.length>0){let e=r[r.length-1];if(e.y===l.y&&e.x+e.width>=l.x){e.width=Math.max(e.width,l.x+l.width-e.x);continue}}r.push(l)}h=r},w=[];let y=[...s];for(;y.length>0;){h=[{x:r,width:o,y:r}];let e=[];const t=[];let a=!1;for(let n of y){if(a){t.push(n);continue}let l=g(n);l?(e.push({index:n.index,x:l.x,y:l.y,width:n.width,height:n.height,src:n.src}),E(l,n)):("order"===k&&(a=!0),t.push(n))}if(w.push(e),0===e.length)break;y=t}return w};return l.a.createElement("div",{className:"home-container"},W&&l.a.createElement("div",{className:"loading-overlay"},l.a.createElement("div",{className:"loading-spinner"},"Creating PDF...")),l.a.createElement("header",{className:"header-container"},l.a.createElement("h1",{className:"header-title"},"PixPact"),l.a.createElement("div",{className:"header-links"},l.a.createElement("a",{href:"https://sayantan.is-a.dev",target:"_blank",rel:"noopener noreferrer"},"Developer"),l.a.createElement("a",{href:"https://github.com/legendsayantan/pixpact",target:"_blank",rel:"noopener noreferrer"},"Source Code"))),l.a.createElement("div",{className:"main-container"},l.a.createElement("div",{className:"controls"},l.a.createElement("div",{className:"file-input-container"},l.a.createElement("label",{htmlFor:"fileInput",className:"file-label"},"Select Images"),l.a.createElement("input",{id:"fileInput",type:"file",accept:"image/*",multiple:!0,className:"file-input",onChange:e=>{Array.from(e.target.files).forEach(e=>{const a=URL.createObjectURL(e),n=new Image;n.onload=(()=>{t(t=>[...t,{file:e,src:a,width:n.width,height:n.height,overrideScale:""}])}),n.src=a})},ref:D})),l.a.createElement("div",{className:"page-customization"},l.a.createElement("div",{className:"form-group hrzntl"},l.a.createElement("label",null,"Page:"),l.a.createElement("select",{value:p,onChange:e=>g(e.target.value),className:"styled-select"},l.a.createElement("option",{value:"A4"},"A4"),l.a.createElement("option",{value:"Letter"},"Letter"),l.a.createElement("option",{value:"Legal"},"Legal"),l.a.createElement("option",{value:"A1"},"A1"),l.a.createElement("option",{value:"A3"},"A3"),l.a.createElement("option",{value:"A5"},"A5"),l.a.createElement("option",{value:"Tabloid"},"Tabloid"),l.a.createElement("option",{value:"Custom"},"Custom"))),"Custom"===p&&l.a.createElement("div",{className:"form-group hrzntl"},l.a.createElement("input",{type:"number",placeholder:"Width (mm)",value:f,onChange:e=>w(e.target.value),className:"styled-input"}),l.a.createElement("input",{type:"number",placeholder:"Height (mm)",value:b,onChange:e=>y(e.target.value),className:"styled-input"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Orientation:"),l.a.createElement("div",{className:"orientation-options"},l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"portrait",checked:"portrait"===v,onChange:e=>E(e.target.value)}),l.a.createElement("span",null,"Portrait")),l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"landscape",checked:"landscape"===v,onChange:e=>E(e.target.value)}),l.a.createElement("span",null,"Landscape"))))),l.a.createElement("div",{className:"scale-customization"},l.a.createElement("h3",null,"Scale Customization"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"percentage",checked:"percentage"===i,onChange:e=>c(e.target.value)}),l.a.createElement("span",null,"Resolution Scale")),l.a.createElement("label",{className:"modern-radio"},l.a.createElement("input",{type:"radio",value:"columns",checked:"columns"===i,onChange:e=>c(e.target.value)}),l.a.createElement("span",null,"Columns per Page"))),l.a.createElement("div",{className:"form-group"},"percentage"===i?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"number",step:"1",value:a,onChange:e=>r(parseFloat(e.target.value)),className:"styled-input"})):l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"number",min:"1",value:u,onChange:e=>h(parseInt(e.target.value,10)),className:"styled-input"})))),l.a.createElement("div",{className:"form-group hrzntl"},l.a.createElement("label",null,"Border:"),l.a.createElement("input",{type:"number",value:N,onChange:e=>x(e.target.value),className:"styled-input"})),l.a.createElement("div",{className:"form-group hrzntl"},l.a.createElement("label",null,"Margin:"),l.a.createElement("input",{type:"number",value:C,onChange:e=>S(e.target.value),className:"styled-input"})),l.a.createElement("div",{className:"form-group hrzntl"},l.a.createElement("label",null,"Priority:"),l.a.createElement("select",{value:k,onChange:e=>A(e.target.value),className:"styled-select"},l.a.createElement("option",{value:"pages"},"Use least pages"),l.a.createElement("option",{value:"try"},"Try to maintain order"),l.a.createElement("option",{value:"order"},"Strictly maintain order"))),l.a.createElement("div",{className:"control-btns"},l.a.createElement("button",{onClick:()=>{const e=$();e.length>0&&(F(e),R(0),z(!0),console.log("Calculated layout:",e))},className:"control-btn calc-btn"},"Preview"),l.a.createElement("button",{onClick:async()=>{let t,a;if(M(!0),"Custom"===p)t=parseFloat(f),a=parseFloat(b);else{const e=m[p];t=e.width,a=e.height}"landscape"===v&&([t,a]=[a,t]);const n=$();if(0===n.length)return void M(!1);const l=new o.a({orientation:v,unit:"mm",format:[t,a]});for(let r=0;r<n.length;r++){r>0&&l.addPage([t,a],v);for(let t of n[r]){const a=await d(e[t.index].src);l.addImage(a,"JPEG",t.x,t.y,t.width,t.height)}}l.save("pixpact_output ("+e.length+" images).pdf"),M(!1)},className:"control-btn generate-btn"},"Save as PDF"))),0===e.length?l.a.createElement("div",{className:"empty-preview"},l.a.createElement("div",null,l.a.createElement("img",{src:s.a,alt:"add",style:{width:"100px",height:"100px",color:"white"}}),l.a.createElement("h2",null,"Add some images to effortlessly compact them into pages"),l.a.createElement("p",null,"Provide mismatching images, of any size, resolution or aspect ratio")),l.a.createElement("p",{style:{alignSelf:"end",fontSize:"small"}},"Have feedback? ",l.a.createElement("a",{href:"https://github.com/legendsayantan/pixpact/issues"},"write them here"))):l.a.createElement("div",{className:"previews"},e.map((e,t)=>l.a.createElement("div",{key:t,className:"preview-container",onClick:()=>(e=>{P(e)})(t)},l.a.createElement("div",{className:"preview-number"},t+1),l.a.createElement("img",{src:e.src,alt:`Preview ${t}`,className:"preview-image"}),l.a.createElement("div",{className:"overlay"},l.a.createElement("span",null,e.width," x ",e.height),l.a.createElement("span",null,"Scale: ",e.overrideScale||("columns"===i?"Auto-fit":"Default"),e.overrideScale&&"%")),l.a.createElement("button",{className:"remove-btn",onClick:e=>{e.stopPropagation(),B(t)}},"\xd7"))))),null!==O&&l.a.createElement("div",{className:"popup-overlay",onClick:U},l.a.createElement("div",{className:"popup",onClick:e=>e.stopPropagation()},l.a.createElement("div",{className:"popup-content"},l.a.createElement("div",{className:"popup-image-container"},l.a.createElement("img",{src:e[O].src,alt:"Large Preview"})),l.a.createElement("div",{className:"popup-controls"},l.a.createElement("h2",null,"Customise"),l.a.createElement("p",null,"Image dimensions: ",e[O].width," x ",e[O].height),l.a.createElement("div",{className:"form-group hrzntl",style:{margin:0}},l.a.createElement("label",{style:{width:"100%"}},"Image No."),l.a.createElement("input",{type:"number",step:"1",defaultValue:O+1,id:"imageNoModified",className:"popup-input styled-input"})),l.a.createElement("div",{className:"form-group hrzntl",style:{margin:0}},l.a.createElement("label",{style:{width:"100%"}},"Override Scale:"),l.a.createElement("input",{type:"number",step:"1",value:e[O].overrideScale,placeholder:"columns"===i?"Auto-fit":"Default",onChange:e=>((e,a)=>{t(t=>t.map((t,n)=>n===e?{...t,overrideScale:a}:t))})(O,e.target.value),className:"popup-input styled-input"})),l.a.createElement("div",{className:"popup-btn-group"},l.a.createElement("button",{onClick:()=>{B(O),U(!1)},className:"popup-btn"},"Remove Image"),l.a.createElement("button",{onClick:U,className:"popup-btn"},"Close")))))),I&&j&&l.a.createElement("div",{className:"popup-overlay",onClick:()=>z(!1)},l.a.createElement("div",{className:"popup calc-popup-vertical",onClick:e=>e.stopPropagation()},l.a.createElement("h2",{className:"calc-heading"},"Layout Preview"),l.a.createElement("div",{className:"calc-tabs"},j.map((e,t)=>l.a.createElement("button",{key:t,className:`calc-tab ${L===t?"active":""}`,onClick:()=>R(t)},t+1))),l.a.createElement("div",{className:"calc-preview-container-vertical"},(()=>{let t,a;if("Custom"===p)t=parseFloat(f)||210,a=parseFloat(b)||297;else{const e=m[p];t=e.width,a=e.height}"landscape"===v&&([t,a]=[a,t]);const n=42*Math.ceil((50*j.length-100)/window.innerWidth),r=(window.innerWidth-100)/t,i=(window.innerHeight-200-n)/a,o=Math.min(r,i),c=t*o,s=a*o;return l.a.createElement("div",{className:"calc-preview-page",style:{width:c,height:s}},j[L].map(t=>l.a.createElement("div",{key:t.index,style:{position:"absolute",left:t.x*o,top:t.y*o,width:t.width*o,height:t.height*o,border:"2px dashed #FFD700",boxSizing:"border-box"}},l.a.createElement("img",{src:e[t.index].src,alt:`Image ${t.index+1}`,style:{width:"100%",height:"100%",display:"block"}}),l.a.createElement("div",{style:{position:"absolute",top:0,left:0,background:"#ff5722",color:"#fff",padding:"2px 4px",fontSize:"10px"}},t.index+1))))})()),l.a.createElement("button",{onClick:()=>z(!1),className:"popup-btn"},"Close"))))};var h=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(u,null))};const p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=(()=>{const a=e.installing;null!=a&&(a.onstatechange=(()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})}i.a.render(l.a.createElement(h,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/service-worker.js";p?(function(e,t){fetch(e).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):g(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):g(t,e)})}}()}],[[8,1,3]]]);
//# sourceMappingURL=main.72150260.chunk.js.map