(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(4),i=a.n(r),c=(a(12),a(13),a(14),a(15),a(5));const o={A1:{width:594,height:841},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},Letter:{width:215.9,height:279.4},Legal:{width:215.9,height:355.6},Tabloid:{width:279.4,height:431.8}},s=e=>new Promise((t,a)=>{const l=new Image;l.crossOrigin="Anonymous",l.onload=function(){const e=document.createElement("canvas");e.width=l.width,e.height=l.height;const a=e.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.globalCompositeOperation="source-over",a.drawImage(l,0,0);const n=e.toDataURL("image/jpeg",1);t(n)},l.onerror=a,l.src=e});var m=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)(50),[i,m]=Object(l.useState)("columns"),[p,u]=Object(l.useState)(2),[d,h]=Object(l.useState)("A4"),[g,v]=Object(l.useState)("portrait"),[E,f]=Object(l.useState)(""),[w,b]=Object(l.useState)(""),[y,N]=Object(l.useState)(0),[x,C]=Object(l.useState)(0),[S,k]=Object(l.useState)(null),[O,F]=Object(l.useState)(null),[P,j]=Object(l.useState)(!1),[A,I]=Object(l.useState)(0),[L,z]=Object(l.useState)(!1),R=Object(l.useRef)(null),D=()=>{k(null)},_=e=>{t(t=>t.filter((t,a)=>a!==e))},$=()=>{let t,l;if("Custom"===d)t=parseFloat(E),l=parseFloat(w);else{const e=o[d];t=e.width,l=e.height}"landscape"===g&&([t,l]=[l,t]);const n=parseFloat(x)||0,r=parseFloat(y)||0,c=t-2*r,s=l-2*r,m=e.map((e,t)=>{const l=e.overrideScale?parseFloat(e.overrideScale):null;if(null===l||isNaN(l)){if("percentage"===i)return{index:t,width:e.width*(a/100),height:e.height*(a/100),src:e.src};{const a=c-(p-1)*n,l=Math.floor(a/p),r=l/e.width;return{index:t,width:l,height:e.height*r,src:e.src}}}return{index:t,width:e.width*(l/100),height:e.height*(l/100),src:e.src}}),u=m.find(e=>e.width>c||e.height>s);if(u)return alert("Image "+(u.index+1)+" is too big for the page. Please reduce scale."),[];m.sort((e,t)=>t.width*t.height-e.width*e.height);let h=[{x:r,width:c,y:r}];const v=e=>{let t=1/0,a=0,l=-1;for(let n=0;n<h.length;n++){const r=h[n];r.width>=e.width&&(r.y<t||r.y===t&&r.x<a)&&(t=r.y,a=r.x,l=n)}return-1===l||t+e.height>r+s?null:{x:a,y:t,nodeIndex:l}},f=(e,t)=>{let a={x:e.x,width:t.width,y:e.y+t.height+n},l=[];for(let i of h)if(i.x+i.width<=e.x||i.x>=e.x+t.width)i.x>=e.x+t.width?l.push({x:i.x+n,width:i.width,y:i.y}):l.push(i);else{i.x<e.x&&l.push({x:i.x,width:e.x-i.x,y:i.y});let a=i.x+i.width,r=e.x+t.width+n;a>r&&l.push({x:r,width:a-r,y:i.y})}l.push(a),l.sort((e,t)=>e.x-t.x);let r=[];for(let n of l){if(r.length>0){let e=r[r.length-1];if(e.y===n.y&&e.x+e.width>=n.x){e.width=Math.max(e.width,n.x+n.width-e.x);continue}}r.push(n)}h=r},b=[];let N=[...m];for(;N.length>0;){h=[{x:r,width:c,y:r}];const e=[],t=[];for(let a of N){let l=v(a);l?(e.push({index:a.index,x:l.x,y:l.y,width:a.width,height:a.height,src:a.src}),f(l,a)):t.push(a)}if(b.push(e),0===e.length)break;N=t}return b};let B={},J=1;if(d){let e,t;if("Custom"===d)e=parseFloat(E)||210,t=parseFloat(w)||297;else{const a=o[d];e=a.width,t=a.height}"landscape"===g&&([e,t]=[t,e]);const a="landscape"===g?500:300;J=a/e,B={width:a,height:a*(t/e),position:"relative",backgroundColor:"#fff"}}return n.a.createElement("div",{className:"home-container"},L&&n.a.createElement("div",{className:"loading-overlay"},n.a.createElement("div",{className:"loading-spinner"},"Creating PDF...")),n.a.createElement("header",{className:"header-container"},n.a.createElement("h1",{className:"header-title"},"PixPact"),n.a.createElement("div",{className:"header-links"},n.a.createElement("a",{href:"https://sayantan.is-a.dev",target:"_blank",rel:"noopener noreferrer"},"Developer"),n.a.createElement("a",{href:"https://github.com/legendsayantan/pixpact",target:"_blank",rel:"noopener noreferrer"},"Source Code"))),n.a.createElement("div",{className:"main-container"},n.a.createElement("div",{className:"controls"},n.a.createElement("div",{className:"file-input-container"},n.a.createElement("label",{htmlFor:"fileInput",className:"file-label"},"Select Images"),n.a.createElement("input",{id:"fileInput",type:"file",accept:"image/*",multiple:!0,className:"file-input",onChange:e=>{Array.from(e.target.files).forEach(e=>{const a=URL.createObjectURL(e),l=new Image;l.onload=(()=>{t(t=>[...t,{file:e,src:a,width:l.width,height:l.height,overrideScale:""}])}),l.src=a})},ref:R})),n.a.createElement("div",{className:"page-customization"},n.a.createElement("h3",null,"Page Customization"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Page Format:"),n.a.createElement("select",{value:d,onChange:e=>h(e.target.value),className:"styled-select"},n.a.createElement("option",{value:"A4"},"A4"),n.a.createElement("option",{value:"Letter"},"Letter"),n.a.createElement("option",{value:"Legal"},"Legal"),n.a.createElement("option",{value:"A1"},"A1"),n.a.createElement("option",{value:"A3"},"A3"),n.a.createElement("option",{value:"A5"},"A5"),n.a.createElement("option",{value:"Tabloid"},"Tabloid"),n.a.createElement("option",{value:"Custom"},"Custom"))),"Custom"===d&&n.a.createElement("div",{className:"form-group hrzntl"},n.a.createElement("input",{type:"number",placeholder:"Width (mm)",value:E,onChange:e=>f(e.target.value),className:"styled-input"}),n.a.createElement("input",{type:"number",placeholder:"Height (mm)",value:w,onChange:e=>b(e.target.value),className:"styled-input"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Orientation:"),n.a.createElement("div",{className:"orientation-options"},n.a.createElement("label",{className:"modern-radio"},n.a.createElement("input",{type:"radio",value:"portrait",checked:"portrait"===g,onChange:e=>v(e.target.value)}),n.a.createElement("span",null,"Portrait")),n.a.createElement("label",{className:"modern-radio"},n.a.createElement("input",{type:"radio",value:"landscape",checked:"landscape"===g,onChange:e=>v(e.target.value)}),n.a.createElement("span",null,"Landscape"))))),n.a.createElement("div",{className:"scale-customization"},n.a.createElement("h3",null,"Scale Customization"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"modern-radio"},n.a.createElement("input",{type:"radio",value:"percentage",checked:"percentage"===i,onChange:e=>m(e.target.value)}),n.a.createElement("span",null,"Resolution Scale")),n.a.createElement("label",{className:"modern-radio"},n.a.createElement("input",{type:"radio",value:"columns",checked:"columns"===i,onChange:e=>m(e.target.value)}),n.a.createElement("span",null,"Columns per Page"))),n.a.createElement("div",{className:"form-group"},"percentage"===i?n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{type:"number",step:"1",value:a,onChange:e=>r(parseFloat(e.target.value)),className:"styled-input"})):n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{type:"number",min:"1",value:p,onChange:e=>u(parseInt(e.target.value,10)),className:"styled-input"})))),n.a.createElement("div",{className:"form-group hrzntl"},n.a.createElement("label",null,"Border:"),n.a.createElement("input",{type:"number",value:y,onChange:e=>N(e.target.value),className:"styled-input"})),n.a.createElement("div",{className:"form-group hrzntl"},n.a.createElement("label",null,"Margin:"),n.a.createElement("input",{type:"number",value:x,onChange:e=>C(e.target.value),className:"styled-input"})),n.a.createElement("div",{className:"control-btns"},n.a.createElement("button",{onClick:()=>{const e=$();e.length>0&&(F(e),I(0),j(!0),console.log("Calculated layout:",e))},className:"control-btn calc-btn"},"Preview"),n.a.createElement("button",{onClick:async()=>{let t,a;if(z(!0),"Custom"===d)t=parseFloat(E),a=parseFloat(w);else{const e=o[d];t=e.width,a=e.height}"landscape"===g&&([t,a]=[a,t]);const l=$();if(0===l.length)return void z(!1);const n=new c.a({orientation:g,unit:"mm",format:[t,a]});for(let r=0;r<l.length;r++){r>0&&n.addPage([t,a],g);for(let t of l[r]){const a=await s(e[t.index].src);n.addImage(a,"JPEG",t.x,t.y,t.width,t.height)}}n.save("pixpact_output_"+e.length+"_images.pdf"),z(!1)},className:"control-btn generate-btn"},"Save as PDF"))),0===e.length?n.a.createElement("div",{className:"empty-preview"},n.a.createElement("h2",null,"Add some images to effortlessly compact them into pages"),n.a.createElement("p",null,"provide mismatching images, of any size or resolution")):n.a.createElement("div",{className:"previews"},e.map((e,t)=>n.a.createElement("div",{key:t,className:"preview-container",onClick:()=>(e=>{k(e)})(t)},n.a.createElement("div",{className:"preview-number"},t+1),n.a.createElement("img",{src:e.src,alt:`Preview ${t}`,className:"preview-image"}),n.a.createElement("div",{className:"overlay"},n.a.createElement("span",null,e.width," x ",e.height),n.a.createElement("span",null,"Scale: ",e.overrideScale||"Default",e.overrideScale?"%":"")),n.a.createElement("button",{className:"remove-btn",onClick:e=>{e.stopPropagation(),_(t)}},"\xd7"))))),null!==S&&n.a.createElement("div",{className:"popup-overlay",onClick:D},n.a.createElement("div",{className:"popup",onClick:e=>e.stopPropagation()},n.a.createElement("div",{className:"popup-content"},n.a.createElement("div",{className:"popup-image-container"},n.a.createElement("img",{src:e[S].src,alt:"Large Preview"})),n.a.createElement("div",{className:"popup-controls"},n.a.createElement("h2",null,"Customise"),n.a.createElement("p",null,"Image dimensions: ",e[S].width," x ",e[S].height),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Override Scale (%):"),n.a.createElement("input",{type:"number",step:"1",value:e[S].overrideScale,onChange:e=>((e,a)=>{t(t=>t.map((t,l)=>l===e?{...t,overrideScale:a}:t))})(S,e.target.value),className:"popup-input styled-input"})),n.a.createElement("div",{className:"popup-btn-group"},n.a.createElement("button",{onClick:()=>{_(S),D()},className:"popup-btn"},"Remove Image"),n.a.createElement("button",{onClick:D,className:"popup-btn"},"Close")))))),P&&O&&n.a.createElement("div",{className:"popup-overlay",onClick:()=>j(!1)},n.a.createElement("div",{className:"popup calc-popup-vertical",onClick:e=>e.stopPropagation()},n.a.createElement("h2",{className:"calc-heading"},"Layout Preview"),n.a.createElement("div",{className:"calc-tabs"},O.map((e,t)=>n.a.createElement("button",{key:t,className:`calc-tab ${A===t?"active":""}`,onClick:()=>I(t)},t+1))),n.a.createElement("div",{className:"calc-preview-container-vertical"},(()=>{let t,a;if("Custom"===d)t=parseFloat(E)||210,a=parseFloat(w)||297;else{const e=o[d];t=e.width,a=e.height}"landscape"===g&&([t,a]=[a,t]);const l="landscape"===g?500:300,r=l*(a/t),i=l/t;return n.a.createElement("div",{className:"calc-preview-page",style:{width:l,height:r}},O[A].map(t=>n.a.createElement("div",{key:t.index,style:{position:"absolute",left:t.x*i,top:t.y*i,width:t.width*i,height:t.height*i,border:"2px dashed #FFD700",boxSizing:"border-box"}},n.a.createElement("img",{src:e[t.index].src,alt:`Image ${t.index+1}`,style:{width:"100%",height:"100%",display:"block"}}),n.a.createElement("div",{style:{position:"absolute",top:0,left:0,background:"#ff5722",color:"#fff",padding:"2px 4px",fontSize:"10px"}},t.index+1))))})()),n.a.createElement("button",{onClick:()=>j(!1),className:"popup-btn"},"Close"))))};var p=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(m,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[7,1,3]]]);
//# sourceMappingURL=main.8efa0d62.chunk.js.map